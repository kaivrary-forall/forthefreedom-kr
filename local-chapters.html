<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>시도당·당협위원회 구성 - 자유와혁신</title>
    
    <!-- SEO 메타 태그 -->
    <meta name="description" content="자유와혁신 서울특별시당 각 당협위원회별 카카오톡 팀채팅 안내. 행정동 기준으로 해당 지역구를 찾아 참여하세요.">
    <meta name="keywords" content="자유와혁신, 당협위원회, 서울시당, 카카오톡, 지역구, 황교안">
    <meta name="author" content="자유와혁신">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://forthefreedom.kr/local-chapters.html">
    
    <!-- 파비콘 설정 -->
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/favicon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/favicon.png">
    <link rel="shortcut icon" type="image/png" href="images/favicon.png">
    <link rel="icon" href="images/favicon.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'red-600': '#A50034',
                        'red-700': '#8B002C',
                        'red-800': '#700024',
                        'red-900': '#56001C',
                        'red-50': '#FDF2F4',
                        'red-100': '#FCE7EA',
                        'red-500': '#A50034',
                        'kakao': '#FEE500'
                    }
                }
            }
        }
    </script>
    <style>
        .text-red-600 { color: #A50034 !important; }
        .bg-red-600 { background-color: #A50034 !important; }
        .border-red-600 { border-color: #A50034 !important; }
        .hover\:bg-red-700:hover { background-color: #8B002C !important; }
        
        .chapter-card {
            transition: all 0.2s ease;
        }
        .chapter-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        .chapter-card.highlight {
            border-color: #A50034 !important;
            background-color: #FDF2F4 !important;
        }
        .kakao-btn {
            background-color: #FEE500;
            color: #000000;
            transition: all 0.2s ease;
        }
        .kakao-btn:hover {
            background-color: #E6CF00;
        }
        .dong-tag {
            display: inline-block;
            background-color: #f3f4f6;
            color: #4b5563;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            margin: 2px;
        }
        .dong-tag.matched {
            background-color: #A50034;
            color: white;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div id="navigation-container"></div>
    
    <!-- 브레드크럼 -->
    <section class="bg-gray-50 py-8 mt-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <nav class="text-sm">
                <ol class="list-none p-0 inline-flex space-x-2">
                    <li class="flex items-center">
                        <a href="index.html" class="text-gray-500 hover:text-red-600">홈</a>
                        <i class="fas fa-chevron-right mx-2 text-gray-400"></i>
                    </li>
                    <li class="text-gray-900">시도당·당협위원회 구성</li>
                </ol>
            </nav>
        </div>
    </section>

    <main class="bg-white">
        <section class="py-16">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <!-- 페이지 헤더 -->
                <div class="text-center mb-12">
                    <h1 class="text-4xl font-bold text-gray-900 mb-4">시도당·당협위원회 구성</h1>
                    <p class="text-xl text-gray-600 mb-2">자유와혁신 서울특별시당 각 당협위원회별 카카오톡 팀채팅 안내</p>
                    <p class="text-base text-red-600 font-medium">
                        <i class="fas fa-exclamation-circle mr-2"></i>
                        자신의 도로명 주소가 아닌, <strong>행정동 단위</strong>로 구분하여 지역구를 선택하셔야 합니다.
                    </p>
                </div>

                <!-- 시도당 탭 -->
                <div class="mb-8">
                    <div class="flex flex-wrap justify-center gap-2 border-b border-gray-200 pb-4" id="tabContainer">
                        <!-- 동적으로 생성됨 -->
                    </div>
                </div>

                <!-- 검색 영역 -->
                <div class="mb-10 max-w-2xl mx-auto" id="searchArea">
                    <div class="relative">
                        <input type="text" id="searchInput" 
                               placeholder="행정동을 입력하세요 (예: 역삼1동, 신사동, 잠실동)" 
                               class="w-full px-5 py-4 pr-12 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 text-lg">
                        <button onclick="searchDong()" class="absolute right-3 top-1/2 transform -translate-y-1/2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    <p id="searchResult" class="mt-3 text-center text-gray-600 hidden"></p>
                </div>

                <!-- 지역구 카드 목록 -->
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="chaptersContainer">
                    <!-- 동적으로 생성됨 -->
                </div>
                
                <!-- 준비중 메시지 -->
                <div id="preparingMessage" class="hidden text-center py-20">
                    <div class="max-w-md mx-auto">
                        <i class="fas fa-hard-hat text-gray-400 text-6xl mb-6"></i>
                        <h3 class="text-2xl font-bold text-gray-700 mb-4" id="preparingTitle">경기도당</h3>
                        <p class="text-gray-500 text-lg">당협위원회 구성 준비 중입니다.</p>
                        <p class="text-gray-400 mt-2">빠른 시일 내에 안내드리겠습니다.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="config.js"></script>
    <script src="nav.js"></script>
    <script>
        // 시도당 목록
        const provinces = [
            { id: 'seoul', name: '서울특별시당', hasData: true },
            { id: 'gyeonggi', name: '경기도당', hasData: false },
            { id: 'incheon', name: '인천광역시당', hasData: false },
            { id: 'busan', name: '부산광역시당', hasData: false },
            { id: 'daegu', name: '대구광역시당', hasData: false },
            { id: 'daejeon', name: '대전광역시당', hasData: false },
            { id: 'gwangju', name: '광주광역시당', hasData: false },
            { id: 'sejong', name: '세종특별자치시당', hasData: false },
            { id: 'gangwon', name: '강원특별자치도당', hasData: false },
            { id: 'chungbuk', name: '충청북도당', hasData: false },
            { id: 'chungnam', name: '충청남도당', hasData: false },
            { id: 'gyeongbuk', name: '경상북도당', hasData: false },
            { id: 'gyeongnam', name: '경상남도당', hasData: false },
            { id: 'jeonbuk', name: '전북특별자치도당', hasData: false },
            { id: 'jeonnam', name: '전라남도당', hasData: false },
            { id: 'jeju', name: '제주특별자치도당', hasData: false }
        ];

        let currentProvince = 'seoul';

        // 서울 당협위원회 데이터
        const seoulChapters = [
            {
                name: "강남 갑",
                dongs: ["신사동", "논현1동", "논현2동", "압구정동", "청담동", "역삼1동", "역삼2동"],
                kakaoLink: "https://invite.kakao.com/tc/Q8wb5DlMvv"
            },
            {
                name: "강남 을",
                dongs: ["개포1동", "개포2동", "개포4동", "세곡동", "일원본동", "일원1동", "일원2동", "수서동"],
                kakaoLink: "https://invite.kakao.com/tc/S4LzmhDFK8"
            },
            {
                name: "강남 병",
                dongs: ["삼성1동", "삼성2동", "대치1동", "대치2동", "대치4동", "도곡1동", "도곡2동"],
                kakaoLink: "https://invite.kakao.com/tc/x6dqGoh3rh"
            },
            {
                name: "강동 갑",
                dongs: ["암사1동", "암사2동", "암사3동", "명일1동", "명일2동", "고덕1동", "고덕2동", "강일동", "상일동"],
                kakaoLink: "https://invite.kakao.com/tc/FcT9mRIBrN"
            },
            {
                name: "강동 을",
                dongs: ["천호1동", "천호2동", "천호3동", "성내1동", "성내2동", "성내3동", "둔촌1동", "둔촌2동", "길동"],
                kakaoLink: "https://invite.kakao.com/tc/ssYGTEfE9Z"
            },
            {
                name: "강북 갑",
                dongs: ["번1동", "번2동", "우이동", "인수동", "수유1동", "수유2동", "수유3동"],
                kakaoLink: "https://invite.kakao.com/tc/uXwwzfwwxH"
            },
            {
                name: "강북 을",
                dongs: ["번3동", "삼양동", "미아동", "송중동", "송천동", "삼각산동"],
                kakaoLink: "https://invite.kakao.com/tc/wv1NiWfyvm"
            },
            {
                name: "강서 갑",
                dongs: ["발산1동", "우장산동", "화곡1동", "화곡2동", "화곡3동", "화곡8동"],
                kakaoLink: "https://invite.kakao.com/tc/wErhlclI9J"
            },
            {
                name: "강서 을",
                dongs: ["가양1동", "가양2동", "등촌3동", "공항동", "방화1동", "방화2동", "방화3동"],
                kakaoLink: "https://invite.kakao.com/tc/VYfa9v0bOv"
            },
            {
                name: "강서 병",
                dongs: ["등촌1동", "등촌2동", "가양3동", "염창동", "화곡4동", "화곡6동", "화곡본동"],
                kakaoLink: "https://invite.kakao.com/tc/Gdp6xnhlj3"
            },
            {
                name: "구로 갑",
                dongs: ["개봉1동", "개봉2동", "개봉3동", "고척1동", "고척2동", "오류1동", "오류2동", "수궁동", "항동"],
                kakaoLink: "https://invite.kakao.com/tc/Grmew30A5t"
            },
            {
                name: "구로 을",
                dongs: ["구로1동", "구로2동", "구로3동", "구로4동", "구로5동", "신도림동", "가리봉동"],
                kakaoLink: "https://invite.kakao.com/tc/I726mhYDub"
            },
            {
                name: "금천",
                dongs: ["금천구 전 지역"],
                kakaoLink: "https://invite.kakao.com/tc/w16GSt7hM3"
            },
            {
                name: "관악 갑",
                dongs: ["보라매동", "은천동", "성현동", "중앙동", "청림동", "행운동", "청룡동", "낙성대동", "인헌동", "남현동", "신림동"],
                kakaoLink: "https://invite.kakao.com/tc/N4ktmdyDsu"
            },
            {
                name: "관악 을",
                dongs: ["신사동", "조원동", "미성동", "난곡동", "난향동", "서원동", "신원동", "서림동", "삼성동", "대학동"],
                kakaoLink: "https://invite.kakao.com/tc/fcjfBmwKhU"
            },
            {
                name: "광진 갑",
                dongs: ["중곡1동", "중곡2동", "중곡3동", "중곡4동", "구의2동", "군자동", "광장동", "능동"],
                kakaoLink: "https://invite.kakao.com/tc/r8sPIxP2Ic"
            },
            {
                name: "광진 을",
                dongs: ["자양1동", "자양2동", "자양3동", "자양4동", "구의1동", "구의3동", "화양동"],
                kakaoLink: "https://invite.kakao.com/tc/klUmEYr6R5"
            },
            {
                name: "노원 갑",
                dongs: ["월계1동", "월계2동", "월계3동", "공릉1동", "공릉2동", "하계1동", "하계2동", "중계본동", "중계2·3동"],
                kakaoLink: "https://invite.kakao.com/tc/DkaUzITz8M"
            },
            {
                name: "노원 을",
                dongs: ["중계1동", "중계4동", "상계1동", "상계2동", "상계3·4동", "상계5동", "상계6·7동", "상계8동", "상계9동", "상계10동"],
                kakaoLink: "https://invite.kakao.com/tc/WKKZQElR61"
            },
            {
                name: "도봉 갑",
                dongs: ["쌍문1동", "쌍문3동", "창1동", "창2동", "창3동", "창4동", "창5동"],
                kakaoLink: "https://invite.kakao.com/tc/AHsy504VSN"
            },
            {
                name: "도봉 을",
                dongs: ["쌍문2동", "쌍문4동", "방학1동", "방학2동", "방학3동", "도봉1동", "도봉2동"],
                kakaoLink: "https://invite.kakao.com/tc/YWWlpiWiyP"
            },
            {
                name: "동대문 갑",
                dongs: ["휘경1동", "휘경2동", "이문1동", "이문2동", "청량리동", "용신동", "제기동", "회기동"],
                kakaoLink: "https://invite.kakao.com/tc/TN2TrcPwuz"
            },
            {
                name: "동대문 을",
                dongs: ["전농1동", "전농2동", "장안1동", "장안2동", "답십리1동", "답십리2동"],
                kakaoLink: "https://invite.kakao.com/tc/TXG50mNKB5"
            },
            {
                name: "동작 갑",
                dongs: ["대방동", "상도2동", "상도3동", "상도4동", "노량진1동", "노량진2동", "신대방1동", "신대방2동"],
                kakaoLink: "https://invite.kakao.com/tc/0nADJCg2rZ"
            },
            {
                name: "동작 을",
                dongs: ["흑석동", "상도1동", "사당1동", "사당2동", "사당3동", "사당4동", "사당5동"],
                kakaoLink: "https://invite.kakao.com/tc/GSC2GXAsje"
            },
            {
                name: "마포 갑",
                dongs: ["공덕동", "아현동", "도화동", "용강동", "대흥동", "염리동", "신수동"],
                kakaoLink: "https://invite.kakao.com/tc/PqCdf56vor"
            },
            {
                name: "마포 을",
                dongs: ["서강동", "서교동", "합정동", "망원1동", "망원2동", "연남동", "성산1동", "성산2동", "상암동"],
                kakaoLink: "https://invite.kakao.com/tc/nfAJ6PPiB8"
            },
            {
                name: "서초 갑",
                dongs: ["잠원동", "반포본동", "반포1동", "반포2동", "반포3동", "반포4동", "방배본동", "방배1동", "방배4동"],
                kakaoLink: "https://invite.kakao.com/tc/XdLoR2RbAz"
            },
            {
                name: "서초 을",
                dongs: ["서초1동", "서초2동", "서초3동", "서초4동", "방배2동", "방배3동", "양재1동", "양재2동", "내곡동"],
                kakaoLink: "https://invite.kakao.com/tc/EUABKmafwi"
            },
            {
                name: "서대문 갑",
                dongs: ["홍제1동", "홍제2동", "북아현동", "천연동", "충현동", "신촌동", "연희동"],
                kakaoLink: "https://invite.kakao.com/tc/06h4F8WWAo"
            },
            {
                name: "서대문 을",
                dongs: ["홍은1동", "홍은2동", "홍제3동", "남가좌1동", "남가좌2동", "북가좌1동", "북가좌2동"],
                kakaoLink: "https://invite.kakao.com/tc/7nr9xEqDTL"
            },
            {
                name: "성북 갑",
                dongs: ["길음1동", "돈암2동", "안암동", "보문동", "정릉1동", "정릉2동", "정릉3동", "정릉4동", "성북동", "삼선동", "동선동"],
                kakaoLink: "https://invite.kakao.com/tc/O9tfteKLJH"
            },
            {
                name: "성북 을",
                dongs: ["돈암1동", "길음2동", "종암동", "석관동", "장위1동", "장위2동", "장위3동", "월곡1동", "월곡2동"],
                kakaoLink: "https://invite.kakao.com/tc/k2oQly2OBf"
            },
            {
                name: "송파 갑",
                dongs: ["풍납1동", "풍납2동", "방이1동", "방이2동", "오륜동", "송파1동", "송파2동", "잠실4동", "잠실6동"],
                kakaoLink: "https://invite.kakao.com/tc/IJ6cVgFYnz"
            },
            {
                name: "송파 을",
                dongs: ["석촌동", "삼전동", "가락1동", "문정2동", "잠실본동", "잠실2동", "잠실3동", "잠실7동"],
                kakaoLink: "https://invite.kakao.com/tc/nvfOMcNioq"
            },
            {
                name: "송파 병",
                dongs: ["거여1동", "거여2동", "마천1동", "마천2동", "오금동", "가락본동", "가락2동", "문정1동", "장지동", "위례동"],
                kakaoLink: "https://invite.kakao.com/tc/eu0aGBXRPr"
            },
            {
                name: "양천 갑",
                dongs: ["목1동", "목2동", "목3동", "목4동", "목5동", "신정1동", "신정2동", "신정6동", "신정7동"],
                kakaoLink: "https://invite.kakao.com/tc/C7H1vPh9Pg"
            },
            {
                name: "양천 을",
                dongs: ["신월1동", "신월2동", "신월3동", "신월4동", "신월5동", "신월6동", "신월7동", "신정3동", "신정4동"],
                kakaoLink: "https://invite.kakao.com/tc/WRQQzVfmF8"
            },
            {
                name: "영등포 갑",
                dongs: ["신길3동", "당산1동", "당산2동", "양평1동", "양평2동", "문래동", "영등포동", "영등포본동", "도림동"],
                kakaoLink: "https://invite.kakao.com/tc/x5ceRq3oE9"
            },
            {
                name: "영등포 을",
                dongs: ["신길1동", "신길4동", "신길5동", "신길6동", "신길7동", "여의동", "대림1동", "대림2동", "대림3동"],
                kakaoLink: "https://invite.kakao.com/tc/q4hFQbBpD9"
            },
            {
                name: "용산",
                dongs: ["용산구 전 지역"],
                kakaoLink: "https://invite.kakao.com/tc/YcmlIpCTb6"
            },
            {
                name: "은평 갑",
                dongs: ["녹번동", "역촌동", "증산동", "신사1동", "신사2동", "응암1동", "응암2동", "응암3동", "수색동"],
                kakaoLink: "https://invite.kakao.com/tc/n9yxNBceDv"
            },
            {
                name: "은평 을",
                dongs: ["구산동", "대조동", "진관동", "갈현1동", "갈현2동", "불광1동", "불광2동"],
                kakaoLink: "https://invite.kakao.com/tc/7WeyD9KkWP"
            },
            {
                name: "중랑 갑",
                dongs: ["상봉2동", "망우3동", "면목본동", "면목2동", "면목4동", "면목5동", "면목3·8동", "면목7동"],
                kakaoLink: "https://invite.kakao.com/tc/YMpTN9y6Yg"
            },
            {
                name: "중랑 을",
                dongs: ["상봉1동", "망우본동", "중화1동", "중화2동", "신내1동", "신내2동", "묵1동", "묵2동"],
                kakaoLink: "https://invite.kakao.com/tc/WKuJmQUz54"
            },
            {
                name: "중성동 갑",
                dongs: ["마장동", "사근동", "응봉동", "송정동", "용답동", "행당1동", "행당2동", "성수1가1동", "성수1가2동", "성수2가1동", "성수2가3동", "왕십리·도선동", "왕십리2동"],
                kakaoLink: "https://invite.kakao.com/tc/6yYTIR5SkZ",
                note: "성동구"
            },
            {
                name: "중성동 을",
                dongs: ["중구 전 지역", "금호1가동", "금호2·3가동", "금호4가동", "옥수동"],
                kakaoLink: "https://invite.kakao.com/tc/Wl4H4R4eAX",
                note: "중구 전 지역 + 성동구 일부"
            },
            {
                name: "종로",
                dongs: ["종로구 전 지역"],
                kakaoLink: "https://invite.kakao.com/tc/wC6aK7wKad"
            }
        ];

        // 현재 활성화된 당협 데이터 가져오기
        function getChapters() {
            if (currentProvince === 'seoul') {
                return seoulChapters;
            }
            return [];
        }

        // 페이지 로드 시 초기화
        document.addEventListener('DOMContentLoaded', () => {
            loadNavigation();
            renderTabs();
            switchProvince('seoul');
            
            // 엔터키 검색
            document.getElementById('searchInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') searchDong();
            });
        });

        // 탭 렌더링
        function renderTabs() {
            const container = document.getElementById('tabContainer');
            container.innerHTML = provinces.map(province => `
                <button onclick="switchProvince('${province.id}')" 
                        id="tab-${province.id}"
                        class="tab-btn px-4 py-2 rounded-lg text-sm font-medium transition-all
                               ${province.id === currentProvince 
                                   ? 'bg-red-600 text-white' 
                                   : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}
                               ${!province.hasData ? 'opacity-70' : ''}">
                    ${province.name.replace('특별시당', '').replace('광역시당', '').replace('특별자치시당', '').replace('특별자치도당', '').replace('도당', '')}
                    ${!province.hasData ? '<span class="text-xs ml-1">(준비중)</span>' : ''}
                </button>
            `).join('');
        }

        // 시도당 전환
        function switchProvince(provinceId) {
            currentProvince = provinceId;
            const province = provinces.find(p => p.id === provinceId);
            
            // 탭 스타일 업데이트
            provinces.forEach(p => {
                const tabEl = document.getElementById(`tab-${p.id}`);
                if (p.id === provinceId) {
                    tabEl.classList.remove('bg-gray-100', 'text-gray-600', 'hover:bg-gray-200');
                    tabEl.classList.add('bg-red-600', 'text-white');
                } else {
                    tabEl.classList.remove('bg-red-600', 'text-white');
                    tabEl.classList.add('bg-gray-100', 'text-gray-600', 'hover:bg-gray-200');
                }
            });
            
            // 검색 초기화
            document.getElementById('searchInput').value = '';
            document.getElementById('searchResult').classList.add('hidden');
            
            if (province.hasData) {
                // 데이터가 있는 시도당
                document.getElementById('searchArea').classList.remove('hidden');
                document.getElementById('chaptersContainer').classList.remove('hidden');
                document.getElementById('preparingMessage').classList.add('hidden');
                renderChapters();
            } else {
                // 준비 중인 시도당
                document.getElementById('searchArea').classList.add('hidden');
                document.getElementById('chaptersContainer').classList.add('hidden');
                document.getElementById('preparingMessage').classList.remove('hidden');
                document.getElementById('preparingTitle').textContent = province.name;
            }
        }

        // 카드 렌더링
        function renderChapters(highlightDong = null) {
            const container = document.getElementById('chaptersContainer');
            const chapters = getChapters();
            
            container.innerHTML = chapters.map((chapter, index) => {
                const isHighlighted = highlightDong && chapter.dongs.some(dong => 
                    dong.includes(highlightDong) || highlightDong.includes(dong.replace(/[0-9·]/g, ''))
                );
                
                const dongsHtml = chapter.dongs.map(dong => {
                    const isMatched = highlightDong && (dong.includes(highlightDong) || highlightDong.includes(dong.replace(/[0-9·]/g, '')));
                    return `<span class="dong-tag ${isMatched ? 'matched' : ''}">${dong}</span>`;
                }).join('');
                
                return `
                <div class="chapter-card bg-white border-2 ${isHighlighted ? 'border-red-600 bg-red-50' : 'border-gray-200'} rounded-xl p-6" 
                     data-index="${index}" id="chapter-${index}">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-bold text-gray-900">${chapter.name}</h3>
                        ${chapter.note ? `<span class="text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded">${chapter.note}</span>` : ''}
                    </div>
                    <div class="mb-4 flex flex-wrap gap-1">
                        ${dongsHtml}
                    </div>
                    <a href="${chapter.kakaoLink}" target="_blank" rel="noopener noreferrer"
                       class="kakao-btn w-full flex items-center justify-center gap-2 py-3 rounded-lg font-bold">
                        <svg width="20" height="20" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
                            <path d="M128 36C70.562 36 24 72.713 24 118c0 29.279 19.466 54.97 48.748 69.477-1.593 5.494-10.237 35.344-10.581 37.689 0 0-.207 1.762.934 2.434s2.483.15 2.483.15c3.272-.457 37.943-24.811 43.944-29.03 5.995.849 12.168 1.28 18.472 1.28 57.438 0 104-36.712 104-82 0-45.287-46.562-82-104-82z" fill="#000000"/>
                        </svg>
                        카카오톡 팀채팅 참여
                    </a>
                </div>
                `;
            }).join('');
        }

        // 검색 함수
        function searchDong() {
            const searchTerm = document.getElementById('searchInput').value.trim();
            const resultEl = document.getElementById('searchResult');
            const chapters = getChapters();
            
            if (!searchTerm) {
                resultEl.classList.add('hidden');
                renderChapters();
                return;
            }
            
            // 검색어로 해당 지역구 찾기
            const matchedChapters = chapters.filter(chapter => 
                chapter.dongs.some(dong => 
                    dong.includes(searchTerm) || searchTerm.includes(dong.replace(/[0-9·]/g, ''))
                )
            );
            
            if (matchedChapters.length > 0) {
                resultEl.innerHTML = `<span class="text-green-600"><i class="fas fa-check-circle mr-2"></i>"${searchTerm}" → <strong>${matchedChapters.map(c => c.name).join(', ')}</strong> 지역구입니다.</span>`;
                resultEl.classList.remove('hidden');
                
                // 카드 하이라이트 및 스크롤
                renderChapters(searchTerm);
                
                // 첫 번째 매칭 카드로 스크롤
                const firstMatchIndex = chapters.findIndex(chapter => 
                    chapter.dongs.some(dong => 
                        dong.includes(searchTerm) || searchTerm.includes(dong.replace(/[0-9·]/g, ''))
                    )
                );
                if (firstMatchIndex >= 0) {
                    setTimeout(() => {
                        document.getElementById(`chapter-${firstMatchIndex}`).scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'center' 
                        });
                    }, 100);
                }
            } else {
                resultEl.innerHTML = `<span class="text-red-600"><i class="fas fa-times-circle mr-2"></i>"${searchTerm}"에 해당하는 지역구를 찾을 수 없습니다. 정확한 행정동 이름을 입력해주세요.</span>`;
                resultEl.classList.remove('hidden');
                renderChapters();
            }
        }
    </script>
</body>
</html>
